<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin Panel | Life in the Pahadi</title>
  <style>
    /* Simple, clean styles for the login card */
    :root{
      --accent:#0b4f77;
      --accent-2:#2f8a3d;
      --muted:#6c7a88;
      --bg:#f3f8f2;
    }
    html,body{height:100%;margin:0;font-family:Arial,Helvetica,sans-serif;background:var(--bg);}
    header{background:linear-gradient(90deg,var(--accent) 0%, rgba(47,138,61,0.95) 100%);padding:18px 28px;color:#fff;}
    header h1{margin:0;font-size:28px;}
    main{min-height:calc(100vh - 78px);display:flex;align-items:center;justify-content:center;padding:40px;}
    .card{background:#fff;padding:34px;border-radius:10px;box-shadow:0 8px 24px rgba(0,0,0,0.08);max-width:520px;width:100%;}
    .card h2{text-align:center;color:var(--accent);margin:0 0 10px;font-size:22px;}
    .card p.lead{text-align:center;color:var(--muted);margin:0 0 18px;}
    form{display:flex;flex-direction:column;gap:12px;}
    .form-row{display:flex;flex-direction:column;gap:6px;}
    label{font-size:13px;color:#334;}
    input[type="password"]{padding:12px 14px;border:2px solid #d6e0df;border-radius:8px;font-size:15px;outline:none;}
    input[type="password"]:focus{border-color:var(--accent);box-shadow:0 0 0 3px rgba(11,79,119,0.08);}
    .btn{display:inline-block;background:var(--accent);color:#fff;padding:12px 18px;border-radius:8px;border:none;cursor:pointer;font-size:15px;}
    .btn:active{transform:translateY(1px);}
    .hint{font-size:12px;color:var(--muted);}
    .error{color:#b32e2e;background:#ffecec;padding:8px 10px;border-radius:6px;font-size:13px;border:1px solid #f2c2c2;}
    .success{color:green;background:#ecfff0;padding:8px 10px;border-radius:6px;font-size:13px;border:1px solid #c8f0d0;}
    .footer-note{margin-top:12px;font-size:12px;color:var(--muted);text-align:center;}
  </style>
</head>
<body>
  <header>
    <h1>Life in the Pahadi</h1>
  </header>

  <main>
    <div class="card" role="main" aria-labelledby="login-heading">
      <h2 id="login-heading">Admin Access Required</h2>
      <p class="lead">Enter Admin Password</p>

      <form id="admin-login-form" autocomplete="off" novalidate>
        <div id="message" aria-live="polite"></div>

        <div class="form-row">
          <label for="admin-password">Password</label>
          <input id="admin-password" name="admin-password" type="password" placeholder="Enter password to access admin panel" aria-required="true" />
        </div>

        <div style="display:flex;gap:10px;align-items:center;justify-content:center;margin-top:8px;">
          <button id="access-btn" class="btn" type="submit">Access Admin Panel</button>
        </div>

        <div class="footer-note">
          <div class="hint">Default password (if not changed): <strong>pahadi2024</strong></div>
        </div>
      </form>
    </div>
  </main>

  <script>
    (function(){
      // Keys and default â€” keep these aligned with your main script if used elsewhere
      const ADMIN_PASSWORD_KEY = 'life_in_pahadi_admin_password';
      const DEFAULT_PASSWORD = 'pahadi2024';
      const ADMIN_PANEL_PATH = 'admin/index.html'; // redirect path (case-sensitive)

      const form = document.getElementById('admin-login-form');
      const input = document.getElementById('admin-password');
      const messageBox = document.getElementById('message');

      // If already authenticated, redirect immediately
      if (sessionStorage.getItem('admin_authenticated') === 'true') {
        try { window.location.href = ADMIN_PANEL_PATH; } catch(e){ /* ignore */ }
      }

      function showMessage(text, type) {
        if (!messageBox) return;
        messageBox.innerHTML = '<div class="' + (type === 'error' ? 'error' : 'success') + '">' + text + '</div>';
      }

      function clearMessage() {
        if (messageBox) messageBox.innerHTML = '';
      }

      function getStoredPassword() {
        try {
          const p = localStorage.getItem(ADMIN_PASSWORD_KEY);
          return p ? p : DEFAULT_PASSWORD;
        } catch (e) {
          return DEFAULT_PASSWORD;
        }
      }

      // Submit handler
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        clearMessage();

        const entered = input.value ? input.value.trim() : '';

        if (!entered) {
          showMessage('Please enter the admin password.', 'error');
          input.focus();
          return;
        }

        const correct = getStoredPassword();

        // Case-sensitive or not? we use exact match but you can change to lower-case compare if prefer
        if (entered === correct) {
          // mark authenticated for this session
          sessionStorage.setItem('admin_authenticated', 'true');
          showMessage('Access granted. Redirecting...', 'success');

          // small delay to show message then redirect
          setTimeout(() => {
            window.location.href = ADMIN_PANEL_PATH;
          }, 700);
        } else {
          showMessage('Incorrect password. Please try again.', 'error');

          // Optional: clear input to avoid copy-paste errors
          input.value = '';
          input.focus();
        }
      });

      // Allow Enter to submit and clear error on input
      input.addEventListener('input', function(){
        clearMessage();
      });
    })();
  </script>
</body>
</html>
